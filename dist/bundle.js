!function(t){var e={};function i(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,i),o.l=!0,o.exports}i.m=t,i.c=e,i.d=function(t,e,r){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)i.d(r,o,function(e){return t[e]}.bind(null,o));return r},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=0)}([function(t,e,i){"use strict";i.r(e);class r{constructor(t,e){this.figure=t,this.X=Math.round(e/2-this.getFigureWidth(this.getFigureFromMatrix())/2),this.Y=-this.getFigureFromMatrix().length}getFigureWidth(t){let e=0;return t.forEach(t=>{t.forEach((t,i)=>{t>0&&i+1>e&&(e=i+1)})}),e}getFigureFromMatrix(){let t=[];return this.figure.forEach(e=>{let i=!1;e.forEach(t=>{Number(t)>0&&(i=!0)}),i&&t.push(e)}),t}drawFigure(t,e){return t=e.map(t=>[...t]),this.getFigureFromMatrix().forEach((e,i)=>{e.forEach((e,r)=>{t[this.Y+i]&&e>0&&(t[this.Y+i][this.X+r]=e)})}),t}getFigureCoordsAtPosition(t,e,i){let r=[];return t.forEach((o,s)=>{o.forEach((o,n)=>{t[s][n]>0&&r.push([e+s,i+n])})}),r}canMove(t,e,i){let r,o=!0,s=this.getFigureFromMatrix(),n=this.getFigureCoordsAtPosition(s,this.Y,this.X);"Y"==e?r=this.getFigureCoordsAtPosition(s,this.Y+i,this.X):"X"==e&&(r=this.getFigureCoordsAtPosition(s,this.Y,this.X+i));let a=r.filter(t=>{if(!n.find(e=>JSON.stringify(t)==JSON.stringify(e)))return!0});return this.Y+1>t.length&&(o=!1),"Y"==e?a.forEach(e=>{(!t[e[0]]||t[e[0]][e[1]]>0)&&(o=!1)}):"X"==e&&a.forEach(e=>{(t[e[1]]<0||t[e[1]]>t[0].length||t[e[0]][e[1]]>0)&&(o=!1)}),o}canRotate(){}moveLeft(){}moveRight(){}rotate(){}}const o=[[[0,0,0],[8,8,8],[0,0,0]],[[8,8],[8,8]],[[0,8,0],[8,8,8],[0,0,0]],[[8,8,0],[0,8,8],[0,0,0]],[[0,8,8],[8,8,0],[0,0,0]],[[0,8,0],[0,8,0],[0,8,8]],[[0,8,0],[0,8,0],[8,8,0]]];let s=new class{constructor(){this.fps=1,this.score=0,this.isPlaying=!0,this.gameHtml="",this.timeStamp,this.gameArea=[["0","0","0","0","0","0","0","0"],["0","0","0","0","0","0","0","0"],["0","0","0","0","0","0","0","0"],["0","0","0","0","0","0","0","0"],["0","0","0","0","0","0","0","0"],["0","0","0","0","0","0","0","0"],["0","0","0","0","0","0","0","0"],["0","0","0","0","0","0","0","0"]],this.snapShot=this.gameArea.map(t=>[...t]),this.activeFigure=new r(this.randomFigure(),this.gameArea[0].length),this.playerY=null}randomFigure(){return o[Math.floor(Math.random()*o.length)]}loop(t){this&&this.isPlaying&&setTimeout(()=>{this.update(t),window.requestAnimationFrame(this.loop.bind(this))},1e3/this.fps)}render(){this.gameHtml="",this.gameHtml+=`score: ${this.score} <br>`,this.gameArea.forEach(t=>{t.forEach(t=>{this.gameHtml+=`${t}`}),this.gameHtml+="<br>"}),document.body.innerHTML=this.gameHtml}update(t){this.activeFigure.Y===this.playerY&&(this.activeFigure=new r(this.randomFigure(),this.gameArea[0].length)),this.gameArea=this.activeFigure.drawFigure(this.gameArea,this.snapShot),this.activeFigure.canMove(this.gameArea,"Y",1)?this.activeFigure.Y++:(this.snapShot=this.gameArea.map(t=>[...t]),this.playerY=this.activeFigure.Y),this.render()}};s.loop(),document.addEventListener("keyup",(function(t){switch(t.code){case"ArrowLeft":s.activeFigure.canMove(s.snapShot,"X",-1)&&console.log("can move left")}}),!1)}]);
//# sourceMappingURL=bundle.js.map